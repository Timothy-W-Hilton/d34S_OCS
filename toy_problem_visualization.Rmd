---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.1'
      jupytext_version: 1.2.4
  kernelspec:
    display_name: d34Shv
    language: python
    name: d34shv
---

```{python}
import toy_problem as TP

import holoviews as hv
import geoviews as gv
import geoviews.feature as gf
import xarray as xr  # want this in toy_problem.py eventuall
import hvplot.xarray

from IPython.display import display

from stem_pytools.domain import calc_grid_area
from timutils.git_tools import print_cwd_git_version
```

```{python}
hv.extension('bokeh')
print_cwd_git_version()
```

```{python}
draw_plots = True
```

```{python}
# da_of, anthro_conc, ocean_conc, plant_conc = TP.main()
(plant_flux_highres, plant_flux_lowres, 
 ocean_flux, anthro_flux, 
 anthro_conc, ocean_conc, plant_conc) = TP.main()
```

```{python}
qm_focean = ocean_flux.hvplot.quadmesh('longitude', 'latitude', coastline=True, label='ocean fOCS')
if draw_plots:
    display(qm_focean)
```

```{python}
qm_anthro = anthro_conc['COS'].sel(lev=1).hvplot.quadmesh('lon', 'lat', coastline=True, 
                                                          label='anthro [OCS]', legend=False)
if draw_plots:
    display(qm_anthro)
```

```{python}
draw_plots = True
qm_fanthro = anthro_flux.anthro_flux_permonth.hvplot.quadmesh('longitude', 'latitude', 
                                                              coastline=True, label='anthro fOCS', legend=False)
if draw_plots:
    display(qm_fanthro)
```

```{python}
qm_fplant_lowres = plant_flux_lowres['fOCS'].hvplot.quadmesh('lon', 'lat', coastline=True, 
                                                             label='2.5 x 2.0', legend=False)
qm_fplant_highres = plant_flux_highres['fOCS'].hvplot.quadmesh('lon', 'lat', coastline=True, 
                                                               label='1.25 x 1.0', legend=False)
if draw_plots:
    display(qm_fplant_lowres + qm_fplant_highres)
```
